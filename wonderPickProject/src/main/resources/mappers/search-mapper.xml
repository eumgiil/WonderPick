<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"https://mybatis.org/dtd/mybatis-3-mapper.dtd" >

	<mapper namespace="searchMapper">
	
		<resultMap id="contestBoardResultSet" type="contest">
		
			<result column="BOARD_NO" property="boardNo"/>
			<result column="BOARD_TITLE" property="boardTitle"/>
			<result column="BOARD_CONTENT" property="boardContent"/>
			<result column="MEMBER_NO" property="memberNo"/>
		
			
			<result column="NICKNAME" property="nickName"/>
			
			<result column="MODIFY_NAME" property="modifyName"/>
			<result column="UPLOAD_DATE" property="uploadDate"/> 
			
				
			<result column="EMOTICON_NO" property="emoticonNo"/>
			<result column="PRICE" property="price"/>
			<result column="PRICE_STATUS" property="priceStatus"/>
			
			<result column="VOTE_STATUS" property="voteStatus"/>
			<result column="FILE_PATH" property="filePath"/>
			
			<result column="PRICE" property="price" />
			<result column="WINNER" property="winner"/>
			
			
		</resultMap>
		<resultMap id="voteResultSet" type="vote">
			<result column="BOARD_NO" property="boardNo" />
			<result column="MEMBER_NO" property="memberNo" />
			<result column="VOTE_STATUS" property="voteStatus" />
		</resultMap>
		
		<resultMap id="heartResultSet" type="heart">
			<result column="BOARD_NO" property="boardNo"/>
			<result column="MEMBER_NO" property="memberNo"/>
		</resultMap>
		
		<resultMap id="searchResultSet" type="search">
			<result column="SEARCH_NO" property="searchNo"/>
			<result column="MEMBER_NO" property="memberNo" />
			<result column="SEARCH_CONTENT" property="searchContent" />
			<result column="SEARCH_DATE" property="searchDate" />
		</resultMap>
		
		
		
		
		<select id="searchAutoComplet" resultMap="searchResultSet">
		
				                  
			SELECT 
			        SEARCH_NO
			       ,SEARCH_CONTENT
			       ,SEARCH_DATE
			       
			  FROM 
			        AUTO_SEARCH
			WHERE
			        SEARCH_CONTENT LIKE '%' || '${ searchValue }' || '%'
			ORDER
			  BY
			        SEARCH_CONTENT
			
		</select>
		
		<select id="searchArtResult" resultMap="contestBoardResultSet">
		
			SELECT  *
			        FROM(   SELECT
			        			 BOARD.BOARD_NO
			                    ,BOARD.BOARD_TITLE    
			                    ,MEMBER.NICKNAME      
			                    ,BOARD_IMAGE.MODIFY_NAME    
			                    ,BOARD_IMAGE.UPLOAD_DATE               
			                    ,FILE_PATH
			          FROM 
			                 BOARD
			        LEFT JOIN
			                 MEMBER ON(BOARD.MEMBER_NO = MEMBER.MEMBER_NO)
			        LEFT JOIN 
			        
			                BOARD_IMAGE  ON(BOARD.BOARD_NO = BOARD_IMAGE.BOARD_NO)
			        LEFT JOIN
			                MEMBER_IMAGE  ON(BOARD.MEMBER_NO = MEMBER_IMAGE.MEMBER_NO)
			        LEFT JOIN   
			                VOTE ON(BOARD.BOARD_NO = VOTE.BOARD_NO)
			        LEFT JOIN
			                EMOTICON  ON(BOARD.BOARD_NO = EMOTICON.BOARD_NO)
			                
			        WHERE
			                BOARD_IMAGE.FILE_LEVEL = 1
			          AND 
			                EMOTICON.PRICE_STATUS = 0
			          AND
			          		WINNER = 0
                      AND 
                            BOARD_TITLE LIKE '%' || '${ keyword }' || '%'
                        
			        ORDER
			           BY   
			                UPLOAD_DATE DESC)
			WHERE ROWNUM BETWEEN 1 AND 5
			
		</select>
		
		<select id="searchGoodsResult" 
		
			
	</mapper>
	
	
	
	
	
	
	
	