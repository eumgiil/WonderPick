<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"https://mybatis.org/dtd/mybatis-3-mapper.dtd" >

	<mapper namespace="contestBoardMapper">
	
		<resultMap id="contestBoardResultSet" type="contestBoard">
		
			<!-- 게시판공통 테이블 -->
			<result column="BOARD_TITLE" property="boardTitle"/>
			<result column="NICKNAME" property="nickName"/>
			
			<result column="MEMBER_MODIFY_NAME" property="memberModifyName"/>
			<result column="MODIFY_NAME" property="modifyName"/>
			<result column="UPLOAD_DATE" property="uploadDate"/>
			
				
			<!-- 이모티콘테이블 -->
			<result column="EMOTICON_NO" property="emoticonNo"/>
			<result column="PRICE" property="price"/>
			<result column="PRICE_STATUS" property="priceStatus"/>
			<!-- 투표테이블  -->
			<result column="VOTE_STATUS" property="voteStatus"/>
			<result column="VOTE_COUNT" property="voteCount"/>
		</resultMap>
		
		<select id="selectTop10" resultMap="contestBoardResultSet">
			SELECT  *
			        FROM(   SELECT
			                     BOARD.BOARD_TITLE    
			                    ,MEMBER.NICKNAME      
			                    ,MEMBER_IMAGE.MEMBER_MODIFY_NAME    
			                    ,BOARD_IMAGE.MODIFY_NAME    
			                    ,BOARD_IMAGE.UPLOAD_DATE   
			                    ,VOTE.VOTE_COUNT   
			          FROM 
			                 BOARD
			        LEFT JOIN
			                 MEMBER ON(BOARD.MEMBER_NO = MEMBER.MEMBER_NO)
			        LEFT JOIN 
			        
			                BOARD_IMAGE  ON(BOARD.BOARD_NO = BOARD_IMAGE.BOARD_NO)
			        LEFT JOIN
			                MEMBER_IMAGE  ON(BOARD.MEMBER_NO = MEMBER_IMAGE.MEMBER_NO)
			        LEFT JOIN   
			                VOTE ON(BOARD.BOARD_NO = VOTE.BOARD_NO)
			        LEFT JOIN
			                EMOTICON ON(BOARD.BOARD_NO = EMOTICON.BOARD_NO)
			                
			        WHERE
			                BOARD_IMAGE.FILE_LEVEL = 1
			          AND 
			                EMOTICON.PRICE_STATUS = 0
			        ORDER
			           BY   
			                VOTE.VOTE_COUNT DESC )
			WHERE ROWNUM BETWEEN 1 AND 10
		</select>
		
	
		

		
	</mapper>